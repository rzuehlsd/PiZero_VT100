<!-- HTML header for doxygen 1.16.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VT100 Terminal App: VT100 Terminal Emulation on Raspberry Pi Zero W with Circle Bare Metal Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function () {
  if (typeof mermaid === "undefined") {
    return;
  }
  document.querySelectorAll("pre.mermaid").forEach(function (block) {
    var container = document.createElement("div");
    container.className = "mermaid";
    container.textContent = block.textContent;
    block.parentNode.replaceChild(container, block);
  });
  mermaid.initialize({ startOnLoad: false, securityLevel: "loose" });
  mermaid.run({ querySelector: ".mermaid" });
});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VT100 Terminal App
   </div>
   <div id="projectbrief">Circle VT100 module documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">VT100 Terminal Emulation on Raspberry Pi Zero W with Circle Bare Metal Framework </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<h1 class="doxsection"><a class="anchor" id="motivation"></a>
Motivation</h1>
<p>My main motivation was that I wanted a terminal emulation for my VT100 replica (<a href="https://www.instructables.com/23-Scale-VT100-Terminal-Reproduction/">https://www.instructables.com/23-Scale-VT100-Terminal-Reproduction/</a>) which I printed and assembled. I wanted something that could start within seconds, so a bare metal implementation on a Pi Zero seems to be the way to go. I looked into the PiGFX implementation by Filippo Bergamasco (<a href="https://github.com/fbergama/pigfx">https://github.com/fbergama/pigfx</a>) and PiVT VT220 Emulator by Hans Hübner (<a href="https://github.com/hanshuebner/pivt">https://github.com/hanshuebner/pivt</a>). PiGFX for my taste was to much focused on reproducing vintage games on Z80 hardware or similar whereas PiVt was focused on VT220 with minimal configurability. Also the support for VT100 features like font stretching, double width fonts and double width double height fonts was missing in both implementations. So I decided to start my own VT100 Emulator journay and here is the result.</p>
<p>Below you see the original VT100 terminal (the color has turned to yellow over the years) and my 60% replica in a color that matches the original "oyster white" and some font examples:</p>
<table class="doxtable">
<tr>
<td><img src="IMG_1088.jpeg" alt="VT100 original" width="80%" class="inline"/></td><td><img src="IMG_1095.jpeg" alt="60% replica" width="80%" class="inline"/></td></tr>
<tr>
<td><img src="DEC_Font_test.jpeg" alt="VT100 original" width="80%" class="inline"/></td><td><img src="DEC_Graphics_Font.jpeg" alt="60% replica" width="80%" class="inline"/></td></tr>
</table>
<p>The current VT100 terminal firmware turns a Raspberry Pi Zero W into a self-contained ANSI/VT100-compatible console. It boots straight into the terminal without Linux, using the Circle bare-metal framework for deterministic hardware access. The design targets headless benches and retro workstations that need a physical keyboard and display front-end for serial hosts.</p>
<p>This project also includes a PCB design to support enhanced features such as a buzzer, an RS-232 adapter, a Mini-DIN-6 adapter for MBC2-Z80, and power distribution for the Pi Zero, MBC2, and display, plus a backplate to mount the board inside a 60% VT100 replica designed by megardi.</p>
<p>My aim was to replicate the behaivior of a true VT100 as close as possible (vttest will show the final result ;-) ) and be able to mimic a VT52, VT220 and my favorite the VT320 in amber, also I did not replicate the small deviations of the VT220 or VT320 font sets. I got the original font definitions for a VT100 font from the ROM data used by Lard Brinkhoff to simulate a VT100 terminal in software on a Pi.</p>
<p>If you want a nearly 100% VT100 terminal simulation, please go for the VT100 simulation from Lars Brinkhoff (<a href="https://github.com/larsbrinkhoff/terminal-simulator">https://github.com/larsbrinkhoff/terminal-simulator</a>). He simulates the complete VT100 hardware with original ROMs on a Raspberry Pi. The Pi executes the ROM by an 8080 emulator and simulates other components like video display with character generator ROM, settings NVRAM, Intel 8251 USART, and a keyboard matrix scanner.</p>
<h1 class="doxsection"><a class="anchor" id="regards"></a>
Regards</h1>
<p>Many thanks to Rene Stange (<a href="https://github.com/rsta2">https://github.com/rsta2</a>) for the creation of the Circle bare metal framework for Raspberry Pis. Without his work this project would not have been possible.</p>
<p>I take my hat off to the engineers a DEC which did a terrific job implementing the VT100 based on the technologies available at that time. They squeezed all functionality I implemented on a Pi with 1 GHz frequency and 512MB into a 8080A with 2Mhz, 8kB of ROM (including the original VT100 7x10 font) and 3kB of RAM. Granted, a lot of the features I had to implement in software were done with analog circuits, but I really feel embarressed by their skills.</p>
<h1 class="doxsection"><a class="anchor" id="license-statement"></a>
License Statement</h1>
<p>Copyright (C) 2026 Ralf Zühlsdorff</p>
<p>This software and hardware design are released under the MIT License. You may use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of it, subject to including the copyright notice and permission notice in all copies or substantial portions.</p>
<h1 class="doxsection"><a class="anchor" id="documentation-policy"></a>
Documentation Policy</h1>
<p>This project keeps documentation in a strict 4-document model:</p>
<ul>
<li>This <span class="tt">README.md</span> document provides the functional overview of the implemented software and user-facing operation guidance.</li>
<li><a class="el" href="md_docs_2_v_t100___architecture.html" title="VT100 Architecture and Technical Implementation (VT100)">Architecture Overview</a> is the single technical architecture + implementation reference for developers.</li>
<li><a class="el" href="md_docs_2_configuration___guide.html" title="Configuration Guide (VT100)">Configuration Guide</a> contains all configuration guidance, split into user/operator and admin/developer parts.</li>
<li><a class="el" href="md_docs_2_hardware.html" title="Carrier Board for Pi Zero VT100 Terminal">Hardware Design</a> contains the KiCad design of the PCB and the OpenSCAD files for printing the backplate.</li>
</ul>
<p>When implementation changes affect behavior, update these documents in lockstep and avoid introducing additional overlapping technical documents.</p>
<h1 class="doxsection"><a class="anchor" id="software-implementation"></a>
Software Implementation</h1>
<p>The application initialises USB keyboard input, the framebuffer, GPIO, UART, and WLAN within Circle and runs a cooperative task loop that keeps the terminal responsive even under heavy serial traffic. Classic aesthetics are preserved by rendering converted VT100 ROM fonts at 1024x768, while modern conveniences such as remote logging remain available.</p>
<h2 class="doxsection"><a class="anchor" id="scope-and-goals"></a>
Scope and Goals</h2>
<ul>
<li>Provide a responsive VT100/ANSI terminal experience with integrated keyboard, framebuffer, and UART handling.</li>
<li>Preserve classic look-and-feel through ROM-derived fonts, colour themes, and optional CRT-style scan lines.</li>
<li>Offer configurable serial, display, audio, and logging behaviour via both on-device UI and SD-card files.</li>
<li>Deliver flexible diagnostics through screen, file, and WLAN logging with remote telnet mirroring.</li>
<li>Keep deployment simple: copy firmware, configuration files, and optional fonts onto an SD card and power the Pi.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="main-features"></a>
Main Features</h2>
<ul class="check">
<li class="checked">USB keyboard input with Circle keymap support for multiple languages</li>
</ul>
<ul class="check">
<li class="checked">Configurable line endings (LF, CRLF, CR)</li>
</ul>
<ul class="check">
<li class="checked">Separate <span class="tt">VT100.txt</span> configuration file on the SD boot partition</li>
</ul>
<ul class="check">
<li class="checked">Circle boot configuration via <span class="tt">cmdline.txt</span> and <span class="tt">config.txt</span></li>
</ul>
<ul class="check">
<li class="checked">Serial UART interface to host via RS232 and Mini-DIN-6 connector</li>
</ul>
<ul class="check">
<li class="checked">Support for TCP/IP host connections</li>
</ul>
<ul class="check">
<li class="checked">Framebuffer renderer supporting multiple VT fonts and colour themes<ul class="check">
<li class="checked">DEC VT100 ROM 8x20 with scan-line simulation</li>
</ul>
<ul class="check">
<li class="checked">VT100 10x20 CRT-style font derived from DEC VT100 ROM Font</li>
</ul>
<ul class="check">
<li class="checked">VT100 10x20 solid font derived from DEC VT100 ROM Font</li>
</ul>
<ul class="check">
<li class="checked">DEC VT100 Special Graphics Character Set support (via <span class="tt">ESC ( 0</span> and <span class="tt">ESC ( B</span>)</li>
</ul>
<ul class="check">
<li class="checked">Dynamic Double-Width / Double-Height glyph scaling for all fonts</li>
</ul>
<ul class="check">
<li class="checked">White, amber, and green on black simulate DEC monochrome terminals (VT100, VT220, VT320)</li>
</ul>
</li>
</ul>
<ul class="check">
<li class="checked">VT100 and ANSI escape sequence parser and renderer based on the VT-parse project</li>
</ul>
<ul class="check">
<li class="checked">Configurable optional VT52 escape sequence support</li>
</ul>
<ul class="check">
<li class="checked">800 Hz buzzer with configurable volume for bell and key click feedback</li>
</ul>
<ul class="check">
<li class="checked">Logging infrastructure with screen, file, and WLAN sinks<ul class="check">
<li class="checked">Real-time debug output with formatted log messages</li>
</ul>
<ul class="check">
<li class="checked">WLAN debug output via telnet session</li>
</ul>
<ul class="check">
<li class="checked">WLAN host mode to integrate remote hosts via tcp/ip</li>
</ul>
</li>
</ul>
<ul class="check">
<li class="checked">GPIO16-controlled TX/RX swap to simulate Null Modem cables with straight DB9 cables</li>
</ul>
<ul class="check">
<li class="checked">Configuration of system via VT100 Setup Screens A and B for supported parameters</li>
</ul>
<ul class="check">
<li class="checked">Separate on-screen setup dialog covering all file-based configuration parameters (F11)</li>
</ul>
<p>The following table gives an overview of implementation highlights:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Area  </th><th class="markdownTableHeadNone">Highlights  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Core Terminal</b>  </td><td class="markdownTableBodyNone">ANSI/VT100 parser, ROM-derived fonts, framebuffer renderer with cursor control  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Input</b>  </td><td class="markdownTableBodyNone">USB keyboard with F12 legacy setup, F11 modern setup, F10 local mode toggle, optional key click  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Serial</b>  </td><td class="markdownTableBodyNone">Configurable UART baud rates, software flow control (XON/XOFF), GPIO16 TX/RX swap  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Display &amp; Audio</b>  </td><td class="markdownTableBodyNone">Runtime font switching, colour themes, buzzer tones, periodic status tasks  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Configuration</b>  </td><td class="markdownTableBodyNone">SD-based <span class="tt">VT100.txt</span>, Circle <span class="tt">cmdline.txt</span>/<span class="tt">config.txt</span>, manual SD-card editing  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Logging</b>  </td><td class="markdownTableBodyNone">Bitmask-controlled outputs (screen, file, WLAN), telnet console, timestamped files  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Networking</b>  </td><td class="markdownTableBodyNone">WLAN bring-up with WPA supplicant, telnet banner showing <span class="tt">ip:2323</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Deployment</b>  </td><td class="markdownTableBodyNone">Makefile-driven build, SD card copy workflow, optional bootloader assets  </td></tr>
</table>
<p>And here are the results of the internal tests which could be switched on in VT100.txt config file:</p>
<p><img src="Test Summary.jpeg" alt="VT100 original" width="70%" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="compile-environment-setup"></a>
Compile Environment Setup</h2>
<h3 class="doxsection"><a class="anchor" id="make-targets"></a>
Make Targets</h3>
<p>The following table lists the implemented Make targets available from <span class="tt">VT100/Makefile</span> (including targets inherited via <span class="tt">../Rules.mk</span>) and their purpose.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target  </th><th class="markdownTableHeadNone">Purpose  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">all</span>  </td><td class="markdownTableBodyNone">Default target; builds firmware image and copies it to <span class="tt">VT100/bin/kernel.img</span>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">kernel.img</span>  </td><td class="markdownTableBodyNone">Creates/refreshes local <span class="tt">kernel.img</span> symlink to <span class="tt">VT100/bin/kernel.img</span>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">clean</span>  </td><td class="markdownTableBodyNone">Removes generated build artifacts (<span class="tt">build/</span>, intermediate objects, map/list/elf/img outputs).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">docs</span>  </td><td class="markdownTableBodyNone">Generates Doxygen documentation from <span class="tt">VT100/Doxyfile</span> into <span class="tt">VT100/docs/doxygen/</span>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">docs_clean</span>  </td><td class="markdownTableBodyNone">Removes generated Doxygen output directories/files under <span class="tt">VT100/docs/doxygen/</span>.  </td></tr>
</table>
<p>This project needs a <b>complete bare-metal Arm GNU toolchain</b> (compiler + target C library headers like <span class="tt">stdint.h</span>).</p>
<h3 class="doxsection"><a class="anchor" id="macos-tested"></a>
macOS (tested)</h3>
<p>Install required host tools and the full Arm toolchain:</p>
<div class="fragment"><div class="line">brew install make</div>
<div class="line">brew install --cask gcc-arm-embedded</div>
</div><!-- fragment --><p>Configure Circle to use the full toolchain path explicitly:</p>
<div class="fragment"><div class="line">cd /Users/ralf/Projekte/VT100_Circle</div>
<div class="line">./configure -f -p /Applications/ArmGNUToolchain/15.2.rel1/arm-none-eabi/bin/arm-none-eabi-</div>
</div><!-- fragment --><p>Verify the compiler and header availability:</p>
<div class="fragment"><div class="line">/Applications/ArmGNUToolchain/15.2.rel1/arm-none-eabi/bin/arm-none-eabi-gcc --version</div>
<div class="line">printf &#39;#include &lt;stdint.h&gt;\nint main(void){return 0;}\n&#39; | \</div>
<div class="line">    /Applications/ArmGNUToolchain/15.2.rel1/arm-none-eabi/bin/arm-none-eabi-gcc -x c - -c -o /tmp/vt100_stdint_test.o</div>
</div><!-- fragment --><p>Build steps:</p>
<div class="fragment"><div class="line">cd /Users/ralf/Projekte/VT100_Circle</div>
<div class="line">./makeall</div>
<div class="line">cd VT100</div>
<div class="line">make -j4</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="important-note-about-homebrew-formulas"></a>
Important Note about Homebrew formulas</h3>
<p>The Homebrew formula <span class="tt">arm-none-eabi-gcc</span> may be built without target headers (<span class="tt">--without-headers</span>), which can cause errors like <span class="tt">fatal error: stdint.h: No such file or directory</span>. The <span class="tt">gcc-arm-embedded</span> cask provides the complete toolchain required by this project.</p>
<h2 class="doxsection"><a class="anchor" id="configuration"></a>
Configuration</h2>
<p>The VT100 terminal reads configuration from <span class="tt">VT100.txt</span> on the SD boot partition and supplements it with Circle boot parameters in <span class="tt">cmdline.txt</span> and firmware settings in <span class="tt">config.txt</span>/<span class="tt">config64.txt</span>.</p>
<h3 class="doxsection"><a class="anchor" id="configuration-file-vt100txt"></a>
Configuration File: VT100.txt</h3>
<p>Create or edit <span class="tt">VT100.txt</span> on the boot partition. The firmware loads it on startup, and settings can be changed either by manual edits or via the on-screen setup dialogs (F11/F12). See <a href="VT100/bin/VT100.txt">VT100/bin/VT100.txt</a> for the shipping template.</p>
<h3 class="doxsection"><a class="anchor" id="available-options"></a>
Available Options</h3>
<h4 class="doxsection"><a class="anchor" id="configuration-summary"></a>
Configuration Summary</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Allowed values  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Notes  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">baud_rate</span>  </td><td class="markdownTableBodyNone">1200–921600  </td><td class="markdownTableBodyNone">115200  </td><td class="markdownTableBodyNone">Host serial speed  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">serial_bits</span>  </td><td class="markdownTableBodyNone">7/8  </td><td class="markdownTableBodyNone">8  </td><td class="markdownTableBodyNone">UART data bits (SET-UP B Bits/Char)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">serial_parity</span>  </td><td class="markdownTableBodyNone">0–2  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">UART parity (0=none, 1=even, 2=odd)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">background_color</span>  </td><td class="markdownTableBodyNone">0–3  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Palette: 0=black, 1=white, 2=amber, 3=green  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">buzzer_volume</span>  </td><td class="markdownTableBodyNone">0–100  </td><td class="markdownTableBodyNone">50  </td><td class="markdownTableBodyNone">Sets 800 Hz buzzer duty cycle (0 disables tone)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">cursor_blinking</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">1 enables blink animation  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">cursor_type</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Cursor style (0=underline, 1=block)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">vt_test</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Run built-in VT test sequences  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">font_selection</span>  </td><td class="markdownTableBodyNone">1–3  </td><td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">Choose between 8x20, 10x20 CRT, 10x20 solid  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">flow_control</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Software XON/XOFF UART flow control  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">key_click</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Enables or disables key click feedback  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">line_ending</span>  </td><td class="markdownTableBodyNone">0–2  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Enter key behaviour: 0=LF, 1=CRLF, 2=CR  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">log_filename</span>  </td><td class="markdownTableBodyNone">String (≤63 chars)  </td><td class="markdownTableBodyNone">vt100.log  </td><td class="markdownTableBodyNone">Used when file logging is active  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">log_output</span>  </td><td class="markdownTableBodyNone">0–7  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">0=off, 1=screen, 2=file, 3=WLAN, 4=screen+file, 5=screen+WLAN, 6=file+WLAN, 7=all  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">smooth_scroll</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Enables non-blocking smooth single-line scroll animation  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">wrap_around</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Controls right-margin wrap (<span class="tt">1</span>) vs overwrite-at-last-column (<span class="tt">0</span>)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">repeat_delay_ms</span>  </td><td class="markdownTableBodyNone">250–1000  </td><td class="markdownTableBodyNone">250  </td><td class="markdownTableBodyNone">Delay before auto-repeat starts  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">repeat_rate_cps</span>  </td><td class="markdownTableBodyNone">2–20  </td><td class="markdownTableBodyNone">10  </td><td class="markdownTableBodyNone">Characters per second once repeating  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">margin_bell</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Rings bell 8 columns before right margin when enabled  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">switch_txrx</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Drives GPIO16 high to swap wiring  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">wlan_host_autostart</span>  </td><td class="markdownTableBodyNone">0/1  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone"><span class="tt">1</span> auto-enables TCP host bridge mode when a client connects  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">text_color</span>  </td><td class="markdownTableBodyNone">0–3  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Foreground palette: 0=black, 1=white, 2=amber, 3=green  </td></tr>
</table>
<p>On screen configuration can be done by using one of the VT100 Set Up Dialogs A and B which can be triggered by F12 key and in an additional extended configuration dialog that also covers parameter of VT100.txt configuration file. This Dialog is triggered by F11 key.</p>
<h4 class="doxsection"><a class="anchor" id="vt100-setup-screen-a-parameter-mapping-current-status"></a>
VT100 SETUP Screen A Parameter Mapping (current status)</h4>
<p>The table below maps the current SET-UP A screen controls to firmware behavior.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">SET-UP A item  </th><th class="markdownTableHeadNone">Corresponding config/runtime state  </th><th class="markdownTableHeadNone">Implementation status  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Horizontal tab stops (per column)  </td><td class="markdownTableBodyNone">Runtime tab-stop map via <span class="tt"><a class="el" href="class_c_t_config.html#a5a45ec2f9226fa794d29f78a1425bebc" title="Set or clear a tab stop at the specified column.">CTConfig::SetTabStop()</a></span> / <span class="tt"><a class="el" href="class_c_t_config.html#a7930499c7eedfce1b5413ecd16b7636a" title="Query whether a tab stop is set at the specified column.">CTConfig::IsTabStop()</a></span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cursor movement in ruler (<span class="tt">Left</span>, <span class="tt">Right</span>, <span class="tt">Home</span>, <span class="tt">End</span>)  </td><td class="markdownTableBodyNone">Tab edit cursor in SET-UP A ruler line  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Set/clear tab at current column (<span class="tt">T</span> / space)  </td><td class="markdownTableBodyNone">Updates tab stop at current column  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tab-stop persistence in <span class="tt">VT100.txt</span>  </td><td class="markdownTableBodyNone">Not mapped to persisted file keys yet  </td><td class="markdownTableBodyNone">Not implemented  </td></tr>
</table>
<h4 class="doxsection"><a class="anchor" id="vt100-setup-screen-b-parameter-mapping-current-status"></a>
VT100 SETUP Screen B Parameter Mapping (current status)</h4>
<p>The table below maps original VT100 SET-UP B terms to the current firmware configuration model.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tab group  </th><th class="markdownTableHeadNone">Parameter name (VT100 docs)  </th><th class="markdownTableHeadNone">Corresponding config param  </th><th class="markdownTableHeadNone">Implementation status  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Scroll  </td><td class="markdownTableBodyNone"><span class="tt">smooth_scroll</span> (leftmost bit in group 1, mask <span class="tt">0x8</span>)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Auto Repeat  </td><td class="markdownTableBodyNone"><span class="tt">key_auto_repeat</span> (+ <span class="tt">repeat_delay_ms</span>, <span class="tt">repeat_rate_cps</span>)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Screen  </td><td class="markdownTableBodyNone">runtime-only (<span class="tt">screen_inverted</span>, not persisted)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Cursor  </td><td class="markdownTableBodyNone"><span class="tt">cursor_type</span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">Bell  </td><td class="markdownTableBodyNone"><span class="tt">margin_bell</span> (group 2 leftmost bit, mask <span class="tt">0x8</span>)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">Keyclick  </td><td class="markdownTableBodyNone"><span class="tt">key_click</span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">ANSI/VT52  </td><td class="markdownTableBodyNone"><span class="tt">vt52_mode</span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">Auto XON/XOFF  </td><td class="markdownTableBodyNone"><span class="tt">flow_control</span> (group 2 rightmost shown bit, mask <span class="tt">0x1</span>)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">US/UK #  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Not implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">Wraparound  </td><td class="markdownTableBodyNone"><span class="tt">wrap_around</span> (group 3 second bit from left, mask <span class="tt">0x4</span>)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">New Line  </td><td class="markdownTableBodyNone"><span class="tt">line_ending</span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">Interlace  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Not implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">Parity Sense  </td><td class="markdownTableBodyNone"><span class="tt">serial_parity</span> (1=even, 2=odd when parity enabled)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">Parity  </td><td class="markdownTableBodyNone"><span class="tt">serial_parity</span> (0=none, 1/2=enabled)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">Bits/Char  </td><td class="markdownTableBodyNone"><span class="tt">serial_bits</span> (7/8)  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">Power  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Not implemented  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">T SPEED (Transmit Speed)  </td><td class="markdownTableBodyNone"><span class="tt">baud_rate</span>  </td><td class="markdownTableBodyNone">Implemented  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">R SPEED (Receive Speed)  </td><td class="markdownTableBodyNone">Follows <span class="tt">baud_rate</span> (TX speed)  </td><td class="markdownTableBodyNone">Always follows transmit speed  </td></tr>
</table>
<h4 class="doxsection"><a class="anchor" id="vt100-extended-setup-dialog-f11"></a>
VT100 Extended Setup Dialog (F11)</h4>
<p>Press <span class="tt">F11</span> to open the extende setup dialog. The dialog uses DEC special graphics box drawing, keeps the active terminal color/font theme, uses a centered double-width title, and shows a three-column <span class="tt">parameter</span> / <span class="tt">value</span> / <span class="tt">description</span> view for all persisted <span class="tt">VT100.txt</span> keys.</p>
<p>Controls:</p>
<ul>
<li><span class="tt">Up</span> / <span class="tt">Down</span>: select parameter row</li>
<li><span class="tt">Left</span> / <span class="tt">Right</span>: change selected value</li>
<li><span class="tt">Return</span>: save to runtime + <span class="tt">VT100.txt</span> and exit</li>
<li><span class="tt">Esc</span>: cancel changes and exit</li>
</ul>
<p>Runtime apply on <span class="tt">Return</span> (current firmware):</p>
<ul>
<li>Immediate runtime apply: renderer visuals (<span class="tt">text_color</span>, <span class="tt">background_color</span>, <span class="tt">font_selection</span>, cursor type/blink, VT52 mode, smooth scroll) and HAL settings (<span class="tt">buzzer_volume</span>, <span class="tt">switch_txrx</span>).</li>
<li>Persisted and used by runtime logic without dedicated re-init: <span class="tt">line_ending</span>, <span class="tt">key_click</span>, <span class="tt">key_auto_repeat</span>, <span class="tt">wrap_around</span>, <span class="tt">margin_bell</span>.</li>
<li>Persisted (applied on subsystem init / reconnect / reboot): serial framing (<span class="tt">baud_rate</span>, <span class="tt">serial_bits</span>, <span class="tt">serial_parity</span>, <span class="tt">flow_control</span>), keyboard repeat timing (<span class="tt">repeat_delay_ms</span>, <span class="tt">repeat_rate_cps</span>), logging targets (<span class="tt">log_output</span>, <span class="tt">log_filename</span>), and <span class="tt">wlan_host_autostart</span>.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="dec-local-mode-f10"></a>
DEC Local Mode (F10)</h3>
<p>The DEC feature to toggle the terminal between local (not connected to host) and line (connected to host) mode can be triggered by pressing <span class="tt">F10</span>.</p>
<ul>
<li><span class="tt">ON</span>: keyboard input is looped directly to the renderer (local echo), and host output is not sent over UART/TCP.</li>
<li><span class="tt">OFF</span>: keyboard input follows the normal host path again.</li>
</ul>
<p>The terminal prints a short status line (<span class="tt">VT100 local mode ON/OFF</span>) when toggled.</p>
<h3 class="doxsection"><a class="anchor" id="example-vt100txt"></a>
Example VT100.txt</h3>
<p>Most of the configurations can be defined in the file VT100.txt on the root volume of the boot SD. The following sections give a summary:</p>
<div class="fragment"><div class="line"># VT100 Terminal Configuration File</div>
<div class="line"># Place this file as VT100.txt on the SD card boot partition.</div>
<div class="line"># Values below match firmware defaults.</div>
<div class="line"> </div>
<div class="line"># --- Serial communication ---</div>
<div class="line"># Host serial speed in bits per second</div>
<div class="line">baud_rate=115200</div>
<div class="line"> </div>
<div class="line"># UART framing:</div>
<div class="line"># serial_bits: 7 or 8</div>
<div class="line"># serial_parity: 0=None, 1=Even, 2=Odd</div>
<div class="line">serial_bits=8</div>
<div class="line">serial_parity=0</div>
<div class="line"> </div>
<div class="line"># --- Keyboard / line handling ---</div>
<div class="line"># line_ending: 0=LF, 1=CRLF, 2=CR</div>
<div class="line">line_ending=0</div>
<div class="line"> </div>
<div class="line"># key_auto_repeat: 0=off, 1=on</div>
<div class="line">key_auto_repeat=1</div>
<div class="line"> </div>
<div class="line"># smooth_scroll: 0=off, 1=on</div>
<div class="line">smooth_scroll=1</div>
<div class="line"> </div>
<div class="line"># wrap_around: 0=overwrite at last column, 1=wrap to next line</div>
<div class="line">wrap_around=1</div>
<div class="line"> </div>
<div class="line"># flow_control: 0=off, 1=software XON/XOFF</div>
<div class="line">flow_control=0</div>
<div class="line"> </div>
<div class="line"># Delay before repeat starts (milliseconds: 250..1000)</div>
<div class="line">repeat_delay_ms=250</div>
<div class="line"> </div>
<div class="line"># Repeat rate (characters per second: 2..20)</div>
<div class="line">repeat_rate_cps=10</div>
<div class="line"> </div>
<div class="line"># key_click: 0=off, 1=on</div>
<div class="line">key_click=1</div>
<div class="line"> </div>
<div class="line"># --- Terminal mode / display ---</div>
<div class="line"># vt52_mode: 0=ANSI (VT100), 1=VT52</div>
<div class="line">vt52_mode=0</div>
<div class="line"> </div>
<div class="line"># cursor_type: 0=underline, 1=block</div>
<div class="line">cursor_type=0</div>
<div class="line"> </div>
<div class="line"># cursor_blinking: 0=steady, 1=blinking</div>
<div class="line">cursor_blinking=0</div>
<div class="line"> </div>
<div class="line"># vt_test: 0=off, 1=on</div>
<div class="line">vt_test=0</div>
<div class="line"> </div>
<div class="line"># font_selection: 1=8x20, 2=10x20 CRT, 3=10x20 solid</div>
<div class="line">font_selection=2</div>
<div class="line"> </div>
<div class="line"># Palette indices: 0=black, 1=white, 2=amber, 3=green</div>
<div class="line">text_color=1</div>
<div class="line">background_color=0</div>
<div class="line"> </div>
<div class="line"># --- Sound / wiring ---</div>
<div class="line"># buzzer_volume: 0..80 (percent duty cycle)</div>
<div class="line">buzzer_volume=50</div>
<div class="line"> </div>
<div class="line"># margin_bell: 0=off, 1=ring 8 columns before right margin</div>
<div class="line">margin_bell=0</div>
<div class="line"> </div>
<div class="line"># switch_txrx: 0=normal wiring, 1=swapped via GPIO16</div>
<div class="line">switch_txrx=0</div>
<div class="line"> </div>
<div class="line"># --- Logging ---</div>
<div class="line"># log_output:</div>
<div class="line"># 0=off</div>
<div class="line"># 1=screen</div>
<div class="line"># 2=file</div>
<div class="line"># 3=wlan</div>
<div class="line"># 4=screen+file</div>
<div class="line"># 5=screen+wlan</div>
<div class="line"># 6=file+wlan</div>
<div class="line"># 7=screen+file+wlan</div>
<div class="line">log_output=0</div>
<div class="line"> </div>
<div class="line"># wlan_host_autostart: 0=command/log mode after connect, 1=auto-enable host bridge mode</div>
<div class="line">wlan_host_autostart=0</div>
<div class="line"> </div>
<div class="line"># Log file name (max 63 chars)</div>
<div class="line">log_filename=vt100.log</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="circle-boot-files"></a>
Circle Boot Files</h2>
<ul>
<li><span class="tt">cmdline.txt</span> — Parsed by Circle during boot. Keep options on one line, e.g. <span class="tt">logdev=tty1 loglevel=4 width=1024 height=768 keymap=DE</span>.</li>
<li><span class="tt">config.txt</span> / <span class="tt">config64.txt</span> — Raspberry Pi firmware settings. The template applies <span class="tt">dtoverlay=miniuart-bt</span>, <span class="tt">enable_uart=1</span>, and <span class="tt">display_hdmi_rotate=2</span> for the upside-down LCD in the replica enclosure.</li>
</ul>
<p>Both templates live in <span class="tt">VT100/bin</span> alongside the firmware image and WLAN support files.</p>
<h2 class="doxsection"><a class="anchor" id="display-orientation"></a>
Display Orientation</h2>
<p>In the 60% VT100 replica, depending on the specific model used, the 1024x768 LCD can hide part of the first line and the left-most characters behind the bezel when mounted in the natural orientation. Mounting the panel upside down resolves the mechanical clearance issue. Rotate the output by 180° by adding the following firmware setting to the active <span class="tt">config.txt</span>/<span class="tt">config64.txt</span>:</p>
<div class="fragment"><div class="line">display_hdmi_rotate=2</div>
</div><!-- fragment --><p>This rotates the HDMI output 180° at the firmware level so the framebuffer keeps its normal coordinate system without extra rendering adjustments.</p>
<h2 class="doxsection"><a class="anchor" id="debug-and-logging"></a>
Debug and Logging</h2>
<p>The terminal ships with a logging subsystem that mirrors messages to any combination of screen, SD card file, and WLAN telnet session:</p>
<ul>
<li>Smart fallback selects a working sink during early boot and transitions seamlessly once the framebuffer is ready.</li>
<li>Messages use familiar prefixes (<span class="tt">[NOTE]</span>, <span class="tt">[WARN]</span>, <span class="tt">[ERROR]</span>) with file/line metadata to simplify troubleshooting.</li>
<li>Screen logging integrates with the terminal view without breaking VT100 escape handling.</li>
<li>WLAN logging announces readiness with <span class="tt">WLAN ready: telnet &lt;ip&gt;:2323</span>; connect via telnet to monitor remotely.</li>
<li>Full telnet host-mode command workflow (<span class="tt">host on/off</span>, <span class="tt">socat</span>, <span class="tt">screen</span>, and auto-start behavior) is documented in section 9.</li>
</ul>
<p>Refer to <span class="tt">VT100/docs/VT100_Architecture.md</span> for technical architecture and implementation details, and <span class="tt">VT100/docs/Configuration_Guide.md</span> for runtime controls and configuration.</p>
<h2 class="doxsection"><a class="anchor" id="wlan-telnet-and-host-mode"></a>
WLAN Telnet and Host Mode</h2>
<p>This firmware supports two distinct WLAN session behaviors on the same telnet endpoint (<span class="tt">&lt;ip&gt;:2323</span>):</p>
<ol type="1">
<li><b>Command/log mode</b> (default) for remote diagnostics and control.</li>
<li><b>Host bridge mode</b> for transparent VT100 host traffic over TCP.</li>
<li><b>Unix <span class="tt">screen</span> as host mode</b> to connect any Unix host to the terminal via TCP.</li>
</ol>
<h3 class="doxsection"><a class="anchor" id="commandlog-mode-wlan-debugging"></a>
Command/log mode (WLAN debugging)</h3>
<p>Use this mode when you want to inspect runtime logs and run control commands without replacing the UART host path.</p>
<div class="fragment"><div class="line">telnet &lt;ip-or-mDNS-name&gt; 2323</div>
</div><!-- fragment --><p>Typical session:</p>
<div class="fragment"><div class="line">help</div>
<div class="line">status</div>
<div class="line">echo hello from remote debug</div>
</div><!-- fragment --><p>What you get in this mode:</p>
<ul>
<li>Mirrored log output (<span class="tt">[NOTE]</span>, <span class="tt">[WARN]</span>, <span class="tt">[ERROR]</span> etc.) over telnet.</li>
<li>Device/network status via <span class="tt">status</span>.</li>
<li>Runtime mode switching via <span class="tt">host on</span> and <span class="tt">host off</span>.</li>
<li>Session close via <span class="tt">exit</span>.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="switch-to-transparent-host-bridge-mode"></a>
Switch to transparent host bridge mode</h3>
<p>In host bridge mode the terminal keyboard input is wired via tcp session to the connected client and response from client rendered on VT100 screen. So this mode effectively simulats a serial host connection over tcp. To enter this bridge mode proceed as follows:</p>
<ol type="1">
<li>From an active telnet session in command/log mode:</li>
</ol>
<ul>
<li>Type <span class="tt">host on</span></li>
</ul>
<ol type="1">
<li>Behavior in host bridge mode:<ul>
<li>Keyboard TX from the VT100 app is sent to the active TCP client.</li>
<li>TCP RX from the client is rendered directly to the VT100 screen.</li>
<li>UART host rendering is suspended while host mode is active to avoid mixed sources.</li>
</ul>
</li>
<li>Return to command/log mode:<ul>
<li>Type <span class="tt">host off</span>, or</li>
<li>Press <span class="tt">Ctrl-]</span> (escape back to command mode).</li>
</ul>
</li>
</ol>
<h3 class="doxsection"><a class="anchor" id="use-unix-screen-as-remote-host-for-vt100-app"></a>
Use Unix <span class="tt">screen</span> as remote host for VT100 app</h3>
<p><span class="tt">screen</span> cannot connect directly to TCP sockets, so bridge TCP to a pseudo-terminal with <span class="tt">socat</span>:</p>
<div class="fragment"><div class="line">socat PTY,link=/tmp/vt100,raw,echo=0 TCP:&lt;ip&gt;:2323</div>
</div><!-- fragment --><p>In a second terminal, attach with <span class="tt">screen</span>:</p>
<div class="fragment"><div class="line">screen /tmp/vt100 115200</div>
</div><!-- fragment --><p>Recommended workflow:</p>
<ol type="1">
<li>Start <span class="tt">telnet &lt;ip&gt; 2323</span>.</li>
<li>Run <span class="tt">host on</span>.</li>
<li>Start <span class="tt">socat</span> and attach <span class="tt">screen</span> to <span class="tt">/tmp/vt100</span>.</li>
<li>Interact with the VT100 app as if <span class="tt">screen</span> were the host endpoint.</li>
</ol>
<h3 class="doxsection"><a class="anchor" id="auto-start-host-mode-on-connect"></a>
Auto-start host mode on connect</h3>
<p>Set the config parameter in <span class="tt">VT100.txt</span>:</p>
<div class="fragment"><div class="line">wlan_host_autostart=1</div>
</div><!-- fragment --><p>With this enabled, each new telnet client enters host bridge mode automatically. Set <span class="tt">wlan_host_autostart=0</span> to keep command/log mode as the default.</p>
<h2 class="doxsection"><a class="anchor" id="internal-vt100-test-integration"></a>
Internal VT100 Test Integration</h2>
<p>The internal test functions are integrated into the kernel to verify most implemented escape sequences without a host connection while still sharing the same keyboard/UART path:</p>
<ul>
<li>A periodic task (<span class="tt"><a class="el" href="class_c_periodic_task.html">CPeriodicTask</a></span>) calls <span class="tt">RunVTTestTick()</span> every 50 ms to advance timed steps, scroll tests, and summary rendering.</li>
<li><span class="tt">onKeyPressed()</span> forwards keyboard input to <span class="tt">HandleVTTestKey()</span> first; when a test is active it consumes Enter/Space for PASS/FAIL, otherwise it forwards input to the host UART unchanged.</li>
<li>The VTTest lifecycle is controlled via <span class="tt">vt_test=0|1</span> in <span class="tt">VT100.txt</span> and <span class="tt"><a class="el" href="class_c_t_config.html#a0f65dc11809836dba99df35772147764" title="Enable or disable the VT test runner.">CTConfig::SetVTTestEnabled()</a></span> when the test ends.</li>
</ul>
<p>These changes keep VTTest self-contained while preserving normal keyboard/UART behavior when the test is not active.</p>
<h2 class="doxsection"><a class="anchor" id="initial-implementation-plan"></a>
Initial Implementation Plan</h2>
<ul class="check">
<li class="checked">Boot application initialising framebuffer with startup banner</li>
</ul>
<ul class="check">
<li class="checked">USB support for keyboard and serial port with loopback testing</li>
</ul>
<ul class="check">
<li class="checked">Raw keyboard input forwarded to screen</li>
</ul>
<ul class="check">
<li class="checked">ANSI escape sequence parsing and rendering</li>
</ul>
<ul class="check">
<li class="checked">Configuration system with <span class="tt">VT100.txt</span> persistence</li>
</ul>
<ul class="check">
<li class="checked">SD card filesystem access for configuration storage</li>
</ul>
<ul class="check">
<li class="checked">Logging infrastructure with smart fallback across screen/file/WLAN</li>
</ul>
<ul class="check">
<li class="checked">Real-time debug output with formatted log messages</li>
</ul>
<ul class="check">
<li class="checked">Screen logging that preserves VT100 behaviour</li>
</ul>
<ul class="check">
<li class="checked">Serial UART communication implementation</li>
</ul>
<ul class="check">
<li class="checked">Bell, TX/RX switching, and other VT100 niceties</li>
</ul>
<ul class="check">
<li class="checked">ROM-derived VT100 font support and converter pipeline</li>
</ul>
<ul class="check">
<li class="checked">Multi-language keyboard layouts (US, DE, others supported by Circle)</li>
</ul>
<ul class="check">
<li class="checked">800 Hz buzzer with configurable key click</li>
</ul>
<ul class="check">
<li class="checked">Configurable auto-repeat for printable, deletion, and cursor keys</li>
</ul>
<ul class="check">
<li class="checked">On-screen configuration dialog for all parameters</li>
</ul>
<ul class="check">
<li class="checked">WLAN debug log messages via telnet</li>
</ul>
<ul class="check">
<li class="checked">Renderer support for bold and underline attributes</li>
</ul>
<ul class="check">
<li class="checked">ESC sequence handling for double-width/double-height modes (dynamic scaling)</li>
</ul>
<ul class="check">
<li class="checked">Font converter updates for double-width/double-height glyphs (simplified logic)</li>
</ul>
<ul class="check">
<li class="checked">Internal VTTest coverage inside kernel (activate with flag <span class="tt">vt_test=1</span>)</li>
</ul>
<ul class="check">
<li class="checked">Comprehensive Test Suite (Core, DEC, Graphics)</li>
</ul>
<ul class="check">
<li class="checked">Dynamic Summary showing all tests based on screen geometry</li>
</ul>
<ul class="check">
<li class="checked">Implementation of VT100 Setup A and B</li>
</ul>
<ul class="check">
<li class="checked">Implementation of additional on-screen configuration dialog for all file-based parameters</li>
</ul>
<ul class="check">
<li class="checked">Implementation of TCP host connection</li>
</ul>
<ul class="check">
<li class="checked">Implement smooth scrolling (single-line, non-blocking animation)</li>
<li class="unchecked">Test coverage on Unix hosts with tool <span class="tt">vttest</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="templates"></a>
Templates</h2>
<p>The <span class="tt">templates/</span> directory provides starter files for new modules and deployment config:</p>
<ul>
<li><span class="tt">task_header.tmpl</span> and <span class="tt">task_implementation.tmpl</span> are generic task scaffolds.</li>
<li>Replace all <span class="tt">TaskName</span>/<span class="tt">CTaskName</span> placeholders with your concrete module name before adding files under <span class="tt">include/</span> and <span class="tt">src/</span>.</li>
<li>Keep the generated task pattern consistent with existing modules: singleton <span class="tt">Get()</span>, <span class="tt">Initialize()</span>, and cooperative <span class="tt">Run()</span> loop.</li>
<li><span class="tt">VT100.txt</span>, <span class="tt">cmdline.txt</span>, and <span class="tt">config.txt</span> are baseline SD-card templates and should stay aligned with the current <span class="tt"><a class="el" href="class_c_t_config.html" title="Cooperative task responsible for configuration persistence and lookup.">CTConfig</a></span> key set and defaults.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="overview-on-escape-sequence-coverage"></a>
Overview on Escape Sequence Coverage</h2>
<p>The table below lists the escape and control sequences handled by this firmware, mapped to the DEC/ANSI families they belong to. “Implementation status” reflects what this codebase currently does when the sequence is received, and “Test” references the VTTest step when available.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Sequence  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">VT52  </th><th class="markdownTableHeadNone">VT100  </th><th class="markdownTableHeadNone">VT220  </th><th class="markdownTableHeadNone">VT320  </th><th class="markdownTableHeadNone">ANSI  </th><th class="markdownTableHeadNone">Implementation status  </th><th class="markdownTableHeadNone">Test  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">^H (BS)  </td><td class="markdownTableBodyNone">Cursor left  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">^I (HT)  </td><td class="markdownTableBodyNone">Tab forward  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented (tab stops)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">^J (LF)  </td><td class="markdownTableBodyNone">New line  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">^M (CR)  </td><td class="markdownTableBodyNone">Carriage return  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC M  </td><td class="markdownTableBodyNone">Reverse index  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC 7  </td><td class="markdownTableBodyNone">Save cursor (DECSC)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC 8  </td><td class="markdownTableBodyNone">Restore cursor (DECRC)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC H  </td><td class="markdownTableBodyNone">VT52 home (cursor to 1,1)  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC A  </td><td class="markdownTableBodyNone">VT52 cursor up  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC B  </td><td class="markdownTableBodyNone">VT52 cursor down  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC C  </td><td class="markdownTableBodyNone">VT52 cursor right  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC D  </td><td class="markdownTableBodyNone">VT52 cursor left  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC E  </td><td class="markdownTableBodyNone">VT52 next line  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC J  </td><td class="markdownTableBodyNone">VT52 clear to end of screen  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC K  </td><td class="markdownTableBodyNone">VT52 clear to end of line  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC Y r c  </td><td class="markdownTableBodyNone">VT52 direct cursor address  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC H  </td><td class="markdownTableBodyNone">Set tab stop (HTS)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented (ANSI mode)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC &lt;  </td><td class="markdownTableBodyNone">Enter ANSI Mode  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC #3  </td><td class="markdownTableBodyNone">Double-height line (top)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC #4  </td><td class="markdownTableBodyNone">Double-height line (bottom)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC #5  </td><td class="markdownTableBodyNone">Normal line size  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC #6  </td><td class="markdownTableBodyNone">Double-width line  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC #8  </td><td class="markdownTableBodyNone">Screen test  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Parsed (ignored)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ A  </td><td class="markdownTableBodyNone">Cursor up (CUU)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ B  </td><td class="markdownTableBodyNone">Cursor down (CUD)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ C  </td><td class="markdownTableBodyNone">Cursor right (CUF)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ D  </td><td class="markdownTableBodyNone">Cursor left (CUB)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ H  </td><td class="markdownTableBodyNone">Cursor home (CUP)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ r;c H  </td><td class="markdownTableBodyNone">Cursor position (CUP)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ J  </td><td class="markdownTableBodyNone">Erase to end of screen (ED)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 2 J  </td><td class="markdownTableBodyNone">Clear entire screen (ED=2)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ K  </td><td class="markdownTableBodyNone">Erase to end of line (EL)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ n X  </td><td class="markdownTableBodyNone">Erase characters (ECH)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ n L  </td><td class="markdownTableBodyNone">Insert lines (IL)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ n M  </td><td class="markdownTableBodyNone">Delete lines (DL)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ n P  </td><td class="markdownTableBodyNone">Delete characters (DCH)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 4 h / 4 l  </td><td class="markdownTableBodyNone">Insert mode (IRM)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Parsed (not supported)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ n m  </td><td class="markdownTableBodyNone">Select graphic rendition (SGR)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Partial (0,1,4,5,7)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 0 m  </td><td class="markdownTableBodyNone">SGR reset (attributes/colors)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ 1 m  </td><td class="markdownTableBodyNone">SGR bold/intense  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 2 m  </td><td class="markdownTableBodyNone">SGR dim/half-bright  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ 4 m  </td><td class="markdownTableBodyNone">SGR underline  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 5 m  </td><td class="markdownTableBodyNone">SGR blink  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ 7 m  </td><td class="markdownTableBodyNone">SGR reverse video  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 27 m  </td><td class="markdownTableBodyNone">SGR reverse off  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ 30-37 / 90-97 m  </td><td class="markdownTableBodyNone">Set foreground color  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Set in VT100.txt  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ 40-47 / 100-107 m  </td><td class="markdownTableBodyNone">Set background color  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Set in VT100.txt  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ ? 2 l  </td><td class="markdownTableBodyNone">Enter VT52 Mode  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ ? 25 h / l  </td><td class="markdownTableBodyNone">Cursor visible (DECTCEM)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ r1; r2 r  </td><td class="markdownTableBodyNone">Scroll region (DECSTBM)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ g  </td><td class="markdownTableBodyNone">Clear tab stop (TBC)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC [ 3 g  </td><td class="markdownTableBodyNone">Clear all tab stops (TBC)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESC [ Z  </td><td class="markdownTableBodyNone">Back-tab (CBT)  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">✓  </td><td class="markdownTableBodyNone">Implemented  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ESC d + / d *  </td><td class="markdownTableBodyNone">Auto page mode on/off  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">—  </td><td class="markdownTableBodyNone">Implemented (local)  </td><td class="markdownTableBodyNone">[PASS]  </td></tr>
</table>
<p><b>VT52 note:</b> The parser supports a strict VT52 mode enabled via <span class="tt">ESC [ ? 2 l</span> and disabled via <span class="tt">ESC &lt;</span>. <span class="tt">ESC H</span> acts as VT52 Home only in VT52 mode; in ANSI mode, it acts as HTS (Set Tab Stop).</p>
<p><b>Color note:</b> The firmware emulates monochrome VT100/VT220/VT320 terminals. ANSI color SGR codes are parsed but not applied; choose text/background colors in <span class="tt">VT100.txt</span> instead.</p>
<h2 class="doxsection"><a class="anchor" id="troubleshooting"></a>
Troubleshooting</h2>
<p>This section collects practical checks and fixes for the most common setup and runtime issues.</p>
<h3 class="doxsection"><a class="anchor" id="build-fails-with-fatal-error-stdinth-no-such-file-or-directory"></a>
Build fails with <span class="tt">fatal error: stdint.h: No such file or directory</span></h3>
<p>Cause: incomplete ARM toolchain (compiler installed without target C library headers).</p>
<p>Fix: follow section 5.1 (tool installation and configure command) and section 5.2 (Homebrew formula note) to install the complete toolchain and reconfigure Circle.</p>
<p>Optional cleanup to avoid accidental compiler mismatch:</p>
<div class="fragment"><div class="line">brew uninstall arm-none-eabi-gcc arm-none-eabi-binutils arm-none-eabi-gdb</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="vt100txt-changes-have-no-effect"></a>
<span class="tt">VT100.txt</span> changes have no effect</h3>
<p>Checklist:</p>
<ul>
<li>File name must be exactly <span class="tt">VT100.txt</span>.</li>
<li>File must be on the SD boot partition expected by firmware (<span class="tt">SD:/VT100.txt</span>).</li>
<li>Keep <span class="tt">key=value</span> format; unknown keys are ignored.</li>
<li>Reboot after changing config.</li>
</ul>
<p>Quick verification key for this feature set:</p>
<div class="fragment"><div class="line">wlan_host_autostart=0</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="cannot-connect-to-wlan-telnet-console"></a>
Cannot connect to WLAN telnet console</h3>
<p>Checklist:</p>
<ul>
<li>Confirm WLAN logging is enabled in config (<span class="tt">log_output</span> includes WLAN: 3, 5, 6, or 7).</li>
<li>Wait until the network is up and mDNS/IP is announced in logs.</li>
<li>Connect to port <span class="tt">2323</span>:</li>
</ul>
<div class="fragment"><div class="line">telnet &lt;ip-or-hostname.local&gt; 2323</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="connected-via-telnet-but-only-logs-appear-no-transparent-host-traffic"></a>
Connected via telnet, but only logs appear (no transparent host traffic)</h3>
<p>You are in command/log mode. Follow section 9.2 to switch to host bridge mode and to return to command/log mode.</p>
<h3 class="doxsection"><a class="anchor" id="host-mode-enabled-but-vt100-still-follows-uart-host"></a>
Host mode enabled but VT100 still follows UART host</h3>
<p>Expected behavior in current firmware: UART rendering is paused while WLAN host mode is active. If behavior looks mixed:</p>
<ul>
<li>Ensure only one active telnet client is connected.</li>
<li>Repeat the section 9.2 mode-switch sequence once.</li>
<li>Confirm section 9.4 configuration for <span class="tt">wlan_host_autostart</span> is set as intended (<span class="tt">0</span> or <span class="tt">1</span>).</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="screen-does-not-connect-directly-to-tcp"></a>
<span class="tt">screen</span> does not connect directly to TCP</h3>
<p><span class="tt">screen</span> requires a tty/pty, not a raw TCP socket. Follow the complete <span class="tt">socat</span> + <span class="tt">screen</span> bridge procedure in section 9.3.</p>
<h3 class="doxsection"><a class="anchor" id="auto-enter-host-mode-on-every-connect"></a>
Auto-enter host mode on every connect</h3>
<p>Set <span class="tt">wlan_host_autostart</span> as described in section 9.4. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.16.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
